---
sort: 6
---

# SPI、UART、I2C、PCIe

UART、I2C、SPI都是常见的低速板级通信协议，目前主流的SoC都内置了这些通讯协议的控制器，同样，各种传感器、Touch控制器、指纹模块、蓝牙模块、WIFI模块也都兼容这三种通信方式的一种或几种。

## UART

通用异步收发器（Universal Asynchronous Receiver/Transmitter）

串行、异步、全双工的通信协议。

UART一般由TXD、RXD、GND三根线组成，是一种异步传输协议。无论是主机还是从机，均可以自由发送数据，但是由于UART总线并没有时钟线，所以需要提前约定对应的波特率，这是一种很简单的传输协议。

## I2C

I2C(Inter-Integrated Circuit BUS) 集成电路总线。

串行，同步，双线，半双工。

I2C是两根线，SDA（数据）和SCL（时钟），也是一种同步传输协议。主机在发送开始信号之后，先发送7个比特的地址位和1个比特的读写位，每个从机有自己的I2C地址，当发现该条指令是发给自己的时候，拉低SDA线（即回复ACK信号），然后主机发送或接收数据，完成传输。传输完成之后，主机发送停止位，完成该次传输。

## SPI

SPI(Serial peripheral interface)即串行外围设备接口。

串行，同步，高速，全双工。四线。用于一主多从机场景。

SPI是四根线，分别是CS（片选）、MOSI（主发从收）、MISO（从发主收）、CLK（时钟），是一种同步传输协议。主机送出CLK信号，主机到从机的数据在MOSI线上传输，从机到主机的数据在MISO线上传输。在启动传输之前，需要先拉低（一般是这样，也有各别芯片是CS高有效）对应从机的CS管脚，在传输完成之后，再拉高CS管脚，从机的SPI Slave模块进入休眠。



## 异同点与使用场景

I2C和SPI都是同步协议，都有时钟信号，在一条总线上也都可以挂多个从设备，但是I2C的从设备是通过地址来区分的，SPI的从设备是通过片选线来区分的，所以SPI总线上，每多挂一个从设备，就要多用一个线作为片选线，而I2C则不用，只要地址不冲突，可以随便挂设备。

但是，I2C总线速度一般普遍慢于SPI，I2C一般的速度是100kbs、400kbps和1Mbps，而SPI的速度可以在几Mbps，也可以10+Mbps。所以看使用场合，低速的话，I2C就挺合适的，如果速度快一些，则一般都要选用SPI。另外，I2C总线的管脚都是开漏输出，必须外接上拉电阻，阻值可以根据总线速度来推算，一般我们常用400kbps传输速率，上拉电阻选用2.2K。

UART和SPI、I2C不同，他是异步传输的，一般来说传输速度比较慢，传统的传输速度一般在115200bps或以下，不过现在大部分UART控制器也能支持到4Mbps或者8Mbps了。UART目前最常用的就是调试接口，因为UART比较简单，所以CPU输出log一般都通过一个UART口来输出。

SPI 和I2C这两种通信方式都是短距离的，芯片和芯片之间或者其他元器件如传感器和芯片之间的通信。SPI和IIC是板上通信,IIC有时也会做板间通信,不过距离甚短,不过超过一米,例如一些触摸屏,手机液晶屏那些薄膜排线很多用IIC,I2C能用于替代标准的并行总线，能连接的各种集成电路和功能模块。I2C是多主控总线，所以任何一个设备都能像主控器一样工作，并控制总线。总线上每一个设备都有一个独一无二的地址，根据设备它们自己的能力，它们可以作为发射器或接收器工作。多路微控制器能在同一个I2C总线上共存这两种线属于低速传输。

而UART是应用于两个设备之间的通信，如用单片机做好的设备和计算机的通信。这样的通信可以做长距离的。UART速度比上面两者者快,最高达100K左右,用与计算机与设备或者计算机和计算之间通信,但有效范围不会很长,约10米左右,UART优点是支持面广,程序设计结构很简单,随着USB的发展,UART也逐渐走向下坡。

## PCIe
Peripheral Component Interconnect express

PCIe在电脑的SSD上很常见，但是在手机里应用时，主要用来在modem和AP，WCN和AP之间传输高速信号。

